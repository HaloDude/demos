#Nvidia YOLO Demo

SSH into the machine that will run the docker

'''
ssh -L PORT:localhost:PORT user@IP  //Replace the PORT to create a tunnel to a specific port
'''
Note: using an ssh tunnel has been slow in my experience. I downloaded sshuttle instead and used it to create a tunnel.

'''
sudo apt-get install sshuttle 
'''
Then to create a tunnel using sshuttle use:
'''
sshuttle --no-latency-control -N -v -r user@ip localhost:PORT localhost:PORT
'''


Once port tunnel is created pull the docker container from docker hub
'''
docker pull kublr/demo-gpu:gpu

or

docker pull kublr/demo-gpu:cpu
'''

Run docker

'''
docker run -it -p PORT:PORT kublr/demo-gpu:gpu
'''

Inside docker navigate to /opt/volume/python
'''
cd opt/volume/python
'''

Run
'''
python darknet.py vid/path/vid.mp4 PORT COMPRESSION_PERCENT
'''

Arguments are:
-video path and name
-port which has a tunnel
-compression percentage. For example 40 will compress the image and keep 40% of the quality. 10 will keep 10% of the quality

If you want to build the docker manually after cloning from github:
1. Clone repo
2. cd into darknet directory
3. download weights for the neural network
"""
wget https://pjreddie.com/media/files/yolov3.weights
"""
4. build docker